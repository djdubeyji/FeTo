AJS.test.require(["jira.webresources:searchers"],(function(){"use strict";var e=this,t=require("jira/util/formatter"),o=require("jira/searchers/element/priority-picker-options"),r=["test 1","test 2","3 test"],s={baseAjaxOptions:{maxResults:45,startAt:5}};module("priorityPickerOptions",{setup:function(){e.sandbox=sinon.sandbox.create();e.sandbox.stub(t,"format",(function(e){return e}));e.createPriority=function(e,t){return{id:t,iconUrl:"http://url/"+t,name:e,description:e}};e.createPriorities=function(t){return{values:r.map(e.createPriority),total:t||r.length}}},teardown:function(){e.sandbox.restore()}});test("should setup ajax options",(function(){var e=o(s);ok(e.ajaxOptions,"ajaxOptions defined");ok(e.ajaxOptions.url,"REST endpoint path defined");ok(e.ajaxOptions.data.maxResults>=1,"maxResults query param is set to equal or higher than 1");ok(!e.query,"Uses debouncing");ok("function"==typeof e.ajaxOptions.formatResponse,"formatResponse method defined")}));test("should keep input options",(function(){var e={test1:"test 1 option",test2:2,test3:!1},t=o(Object.assign(s,e));equal(t.test1,e.test1,"keep string property");equal(t.test2,e.test2,"keep numeric property");equal(t.test3,e.test3,"keep boolean property")}));test("should format response",(function(){var t=e.createPriorities(),r=o(s).ajaxOptions.formatResponse(t);t.values.forEach((function(e){return ok(r[0].items().some((function(t){return t.value()===e.id&&t.label()===e.name})),"should format response for priority id:"+e.id+", name:"+e.name)}));ok(!0===r[0].fetchedThroughAjaxCall(),"marked as ajax call response")}));test("should include footer text when number of priorities returned was trimmed",(function(){var t=e.createPriorities(5),r=o(s).ajaxOptions.formatResponse(t);ok("common.concepts.too.many.matches"===r[0].footerText(),"footer text is set with proper translation key")}));test("should omit footer text when all projects were returned",(function(){var t=e.createPriorities(),r=o(s).ajaxOptions.formatResponse(t);ok(!r[0].footerText(),"footer text is not set")}))}));