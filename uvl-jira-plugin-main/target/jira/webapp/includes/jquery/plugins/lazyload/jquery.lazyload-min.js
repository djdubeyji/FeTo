!function(e,t){var o=e(t);e.fn.lazyload=function(i){var n,r=this,f={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};function l(){var t=0;r.each((function(){var o=e(this);if(!f.skip_invisible||o.is(":visible"))if(e.abovethetop(this,f)||e.leftofbegin(this,f));else if(e.belowthefold(this,f)||e.rightoffold(this,f)){if(++t>f.failure_limit)return!1}else o.trigger("appear")}))}if(i){if(void 0!==i.failurelimit){i.failure_limit=i.failurelimit;delete i.failurelimit}if(void 0!==i.effectspeed){i.effect_speed=i.effectspeed;delete i.effectspeed}e.extend(f,i)}n=void 0===f.container||f.container===t?o:e(f.container);0===f.event.indexOf("scroll")&&n.bind(f.event,(function(e){return l()}));this.each((function(){var t=this,o=e(t);t.loaded=!1;o.one("appear",(function(){if(!this.loaded){if(f.appear){var i=r.length;f.appear.call(t,i,f)}e("<img />").bind("load",(function(){o.hide().attr("src",o.data(f.data_attribute))[f.effect](f.effect_speed);t.loaded=!0;var i=e.grep(r,(function(e){return!e.loaded}));r=e(i);if(f.load){var n=r.length;f.load.call(t,n,f)}})).error((function(){o.attr("src",o.data(f.data_attribute))})).attr("src",o.data(f.data_attribute))}}));0!==f.event.indexOf("scroll")&&o.bind(f.event,(function(e){t.loaded||o.trigger("appear")}))}));o.bind("resize",(function(e){l()}));l();return this};e.belowthefold=function(i,n){return(void 0===n.container||n.container===t?o.height()+o.scrollTop():e(n.container).offset().top+e(n.container).height())<=e(i).offset().top-n.threshold};e.rightoffold=function(i,n){return(void 0===n.container||n.container===t?o.width()+o.scrollLeft():e(n.container).offset().left+e(n.container).width())<=e(i).offset().left-n.threshold};e.abovethetop=function(i,n){return(void 0===n.container||n.container===t?o.scrollTop():e(n.container).offset().top)>=e(i).offset().top+n.threshold+e(i).height()};e.leftofbegin=function(i,n){return(void 0===n.container||n.container===t?o.scrollLeft():e(n.container).offset().left)>=e(i).offset().left+n.threshold+e(i).width()};e.inviewport=function(t,o){return!(e.rightofscreen(t,o)||e.leftofscreen(t,o)||e.belowthefold(t,o)||e.abovethetop(t,o))};e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return!e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window);