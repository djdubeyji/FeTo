require(["jira/util/formatter","wrm/context-path","jquery"],(function(e,a,t){"use strict";var n;function r(){var r=t("#default-groups-warning");r.addClass("hidden");var i=t("#globalPermType_select option:selected").val(),o=t("#groupName_select option:selected").val(),l=t("#sharing-with-anyone-warning");l.addClass("hidden");!function(e,a,t){"USER_PICKER"===a&&""===e&&t.removeClass("hidden")}(o,i,l);if(o&&("SYSTEM_ADMIN"===i||"ADMINISTER"===i)){var s=t("#addpermission_submit");s.attr("aria-disabled","true");void 0===n&&(n=t.ajax({url:a()+"/rest/api/2/applicationrole",contentType:"application/json",type:"GET"}).promise());n.done((function(a){!function(a,n,r,i){var o=t("#globalPermType_select option:selected"),l=o.val();if(t("#groupName_select option:selected").val()===a&&l===n){var s=r.filter((function(e){return t.inArray(a,e.defaultGroups)>-1}));if(s.length>0){var d=o.text().trim();t("#default-group-warning-message").text(e.I18n.getText("admin.errors.permissions.grant.admin.to.default.group",a,s[0].name,d));i.removeClass("hidden")}}}(o,i,a,r)}));n.always((function(){s.attr("aria-disabled","false")}))}}t(document).ready((function(){t("#groupName_select").on("change",r);t("#globalPermType_select").on("change",r)}))}));