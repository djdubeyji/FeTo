define("jira/common/header",["jira/util/formatter","jira/message","jira/issue","jira/util/events","exports","wrm/context-path"],(function(e,n,s,t,i,o){"use strict";var r,u,c,a,d,p={},f=new Promise((function(e){r=e})),I=function(n,s){var t=n.substr(0,n.indexOf("-"));return e.format('<a href="{0}" target="_blank">',o()+"/plugins/servlet/project-config/"+t+"/"+s)},m=function(e){e&&n.showSuccessMsg(e,{closeable:!0});p={}},l=function(e,n){var s="";p.versionCreated&&(s="<p>"+e+"</p>");p.componentCreated&&(s+="<p>"+n+"</p>");return s},v=function(){return!!(JIRA&&JIRA.Issues&&JIRA.Issues.Application)&&JIRA.Issues.Application};i.initialize=function(){t.bind("QuickCreateIssue.sessionComplete",u=function(n,t){setTimeout((function(){var n=[].concat(t).pop(),i=s.issueCreatedMessage(n);i+=l(e.I18n.getText("jira.version.created.quick.create",I(n.issueKey,"versions"),"</a>"),e.I18n.getText("jira.component.created.quick.create",I(n.issueKey,"components"),"</a>"));m(i)}),100)});v()&&v().on("issueEditor:saveSuccess",c=function(n){var t=n&&n.issueKey?n.issueKey:s.getIssueKey(),i=l(e.I18n.getText("jira.version.created",I(t,"versions"),"</a>"),e.I18n.getText("jira.component.created",I(t,"components"),"</a>"));m(i)});t.bind("Issue.Version.new.selected",a=function(){p.versionCreated=!0});t.bind("Issue.Component.new.selected",d=function(){p.componentCreated=!0});"function"==typeof r&&r()};i.headerInitialising=f;i.unbind=function(){t.unbind("QuickCreateIssue.sessionComplete",u);t.unbind("Issue.Version.new.selected",a);t.unbind("Issue.Component.new.selected",d);v()&&v().unbind("issueEditor:saveSuccess",c)}}));