define("jira/field/user-picker-util",["jira/ajs/list/item-descriptor","jira/ajs/list/group-descriptor","wrm/context-path","jquery","underscore"],(function(e,r,t,i,s){"use strict";var n={reporter:"/rest/internal/2/users/reporter"},a={getUrl:function(e,r,i){if(r){if(!n[i])throw new Error("The URL for the "+i+" picker is not defined");return""+t()+n[i]}return t()+(e?"/rest/api/1.0/users/picker":"/rest/api/2/user/picker")},formatResponse:function(t){var s=[];i(t).each((function(t,n){var a=new r({weight:t,label:n.footer});i(n.users).each((function(){a.addItem(new e({value:this.name,label:this.displayName,html:this.html,icon:this.avatarUrl,iconType:"rounded",allowDuplicate:!1,highlighted:!0,userKey:this.key}))}));s.push(a)}));return s},formatResponseWithoutHTML:function(e,r){var t={users:e.users.map((function(e){e.html=function(e,r){var t=new RegExp("\\b"+RegExp.escape(r),"ig"),i=function(e){return e.replace(t,(function(e){return"<mark>"+e+"</mark>"}))},n=s.escape(e.displayName),a=s.escape(e.name),u=s.escape(e.emailAddress);return i(n)+(e.emailAddress?" - "+u:"")+" ("+i(a)+")"}(e,r);return e}))};return a.formatResponse(t,r,!1)}};return a}));AJS.namespace("JIRA.UserPickerUtil",null,require("jira/field/user-picker-util"));