!function(t){var i="input keyup";t.fn.expandOnInput=function(s){var a=this.filter("textarea");a.unbind(i,n).bind(i,n);(t.browser.mozilla||t.browser.msie)&&a.unbind("paste",e).bind("paste",e);a.unbind("refreshInputHeight").bind("refreshInputHeight",(function(){t(this).css("height","");n.call(this)}));a.data("expandOnInput_maxHeight",s);a.each((function(){var i=t(this);i.each((function(){var i=t(this);i.data("hasFixedParent",!!i.hasFixedParent())}));""!==i.val()&&n.call(this)}));return this};function e(){var i=t(this),e=this;setTimeout((function(){i.keyup();e.scrollTop=e.scrollHeight}),0)}function n(){var s=t(this),a="border-box"===(s.css("boxSizing")||s.css("-mozBoxSizing")||s.css("-webkitBoxSizing")||s.css("-msBoxSizing"));this.scrollHeight;var h,r=parseInt(s.css("maxHeight"),10)||s.data("expandOnInput_maxHeight")||t(window).height()-160;if(a){var o=s.outerHeight();h=Math.max(o+this.scrollHeight-this.clientHeight,o)}else{var c=s.height();h=Math.max(this.scrollHeight-(s.innerHeight()-c),c)}if(h<r)s.css({overflow:"hidden",height:h+"px"});else{var l=this.selectionStart;s.css({"overflow-y":"auto",height:r+"px"});s.unbind(i,n);s.unbind("paste",e);if(this.selectionStart!==l){this.selectionStart=l;this.selectionEnd=l}h=r}s.trigger("expandedOnInput");if(!s.data("hasFixedParent")){var d=t(window),g=d.scrollTop(),u=s.offset().top+h-d.height()+29;g<u&&d.scrollTop(u)}s.trigger("stalkerHeightUpdated")}}(jQuery);