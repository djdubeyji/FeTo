define("jira/field/init-cascading-selects",["jquery","jira/util/events/reasons","jira/util/events/types","jira/util/events"],(function(e,i,t,n){"use strict";n.bind(t.NEW_CONTENT_ADDED,(function(t,n,a){a!==i.panelRefreshed&&e(n||document.body).find("div.aui-field-cascadingselect").add("tr.aui-field-cascadingselect").add("td.aui-field-cascadingselect").each((function(){var i=e(this),t=i.find(".cascadingselect-parent"),n="",a=i.find(".cascadingselect-child"),c=a.find("option"),d=a.find(":selected");t.bind("cascadingSelectChanged",(function(){var i,s=t.find("option:selected").attr("class");if(s!==n){i=e("<span />").insertAfter(a);a.detach();a.find("option").each((function(e,i){i.parentNode.removeChild(this)}));a.insertAfter(i);i.remove();c.filter("."+t.find("option:selected").attr("class")).appendTo(a);d.hasClass(t.find("option:selected").attr("class"))?a.val(d.val()):a.val(a.find("option:first").val());n=s}})).change((function(){e(this).trigger("cascadingSelectChanged")})).trigger("cascadingSelectChanged")}))}))}));