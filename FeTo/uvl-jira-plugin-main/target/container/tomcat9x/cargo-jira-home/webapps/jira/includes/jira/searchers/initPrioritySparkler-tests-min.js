AJS.test.require(["jira.webresources:searchers"],(function(){"use strict";var e=this,t={getSelectedProjectsIds:function(){return["16"]}};module("prioritySparkler",{setup:function(){e.sandbox=sinon.sandbox.create();e.context=AJS.test.mockableModuleContext();e.skateSpy=e.sandbox.spy();e.skateSpy.type={};e.mockedPriorityPickerFinalOptions={ajaxOptions:11};e.priorityPickerOptionsSpy=e.sandbox.spy((function(){return e.mockedPriorityPickerFinalOptions}));e.checkboxMultiSelectSpy=e.sandbox.spy();e.context.mock("jira/skate",e.skateSpy);e.context.mock("jira/searchers/element/priority-picker-options",e.priorityPickerOptionsSpy);e.context.mock("jira/ajs/select/checkbox-multi-select",e.checkboxMultiSelectSpy);e.context.mock("jira/searchers/element/common-pickers-utils",t);e.context.require("jira/searchers/element/priority-sparkler");e.fixture=document.getElementById("qunit-fixture");e.fixture.innerHTML='<select class="select js-default-checkboxmultiselectpriority" id="searcher-priority" multiple="multiple" name="priority">\n                <option title="Priority Low" value="1">\n                    Priority Low\n                </option>\n                <option title="Priority High" value="2">\n                    Priority High\n                </option>\n            </select>'},teardown:function(){e.sandbox.restore()}});test("should setup priority picker",(function(){equal(e.skateSpy.calledOnce,!0,"skate was called");var i=e.skateSpy.args[0];equal(i[0],"js-default-checkboxmultiselectpriority","Class name defining picker is correct");var r=document.getElementById("searcher-pid");i[1].created(r);equal(e.priorityPickerOptionsSpy.calledOnce,!0,"priorityPickerOptions() was called");var o=e.priorityPickerOptionsSpy.firstCall.args[0];equal(o.content,"mixed","Mixed descriptor fetcher is set");var c={projectIds:t.getSelectedProjectsIds()};deepEqual(o.baseAjaxOptions,c,"Base Ajax options are correctly set");equal(e.checkboxMultiSelectSpy.calledOnce,!0,"New CheckboxMultiSelect was created");equal(e.checkboxMultiSelectSpy.calledWith(e.mockedPriorityPickerFinalOptions),!0,"CheckboxMultiSelect was passed final project picker options")}))}));