AJS.test.require(["jira.webresources:searchers"],(function(){"use strict";var e=this,t={DEFAULT_MAX_RESULTS:4,DEFAULT_MAX_RESULTS_PER_GROUP:2};module("projectSparkler",{setup:function(){e.sandbox=sinon.sandbox.create();e.context=AJS.test.mockableModuleContext();e.skateSpy=e.sandbox.spy();e.skateSpy.type={};e.mockedProjectPickerFinalOptions={ajaxOptions:42};e.projectPickerOptionsSpy=e.sandbox.spy((function(){return e.mockedProjectPickerFinalOptions}));e.checkboxMultiSelectSpy=e.sandbox.spy();e.context.mock("jira/skate",e.skateSpy);e.context.mock("jira/searchers/element/project-picker-options",e.projectPickerOptionsSpy);e.context.mock("jira/ajs/select/checkbox-multi-select",e.checkboxMultiSelectSpy);e.context.mock("jira/searchers/element/common-pickers-utils",t);e.context.require("jira/searchers/element/project-sparkler");e.fixture=document.getElementById("qunit-fixture");e.fixture.innerHTML='<select class="select js-default-checkboxmultiselect-custom-field" id="searcher-pid" multiple="multiple" name="pid">\n                <option title="Project Z" value="26">\n                    Project Z\n                </option>\n                <option title="Project X" value="10">\n                    Project X\n                </option>\n            </select>'},teardown:function(){e.sandbox.restore()}});test("should setup project picker",(function(){equal(e.skateSpy.calledOnce,!0,"skate was called");var t=e.skateSpy.args[0];equal(t[0],"js-project-checkboxmultiselect","Class name defining picker is correct");var c=document.getElementById("searcher-pid");t[1].created(c);equal(e.projectPickerOptionsSpy.calledOnce,!0,"projectPickerOptions() was called");var o=e.projectPickerOptionsSpy.firstCall.args[0];equal(o.content,"mixed","Mixed descriptor fetcher is set");equal(e.checkboxMultiSelectSpy.calledOnce,!0,"New CheckboxMultiSelect was created");equal(e.checkboxMultiSelectSpy.calledWith(e.mockedProjectPickerFinalOptions),!0,"CheckboxMultiSelect is passed final project picker options")}))}));