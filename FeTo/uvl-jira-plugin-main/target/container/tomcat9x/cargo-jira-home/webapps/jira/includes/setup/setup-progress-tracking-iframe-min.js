define("jira/setup/setup-tracker",["jira/util/data/meta","jira/jquery/deferred","jquery","underscore"],(function(e,t,n,r){var i=e.get("setup-analytics-iframe-url");function u(e){var t=[];for(var n in e)t.push(n+"="+encodeURIComponent(e[n]));return t.length?"?"+t.join("&"):""}function s(e){var u=t();if(r.isEmpty(i))u.reject();else{var s=n("<iframe>").css("display","none").attr("src",i+e);s.load((function(){u.resolve()}));s.appendTo("body");setTimeout((function(){u.reject()}),3e3)}return u.promise()}function a(){var t=e.get("setup-session-id"),n="jira.setup.session.id";t?localStorage.setItem(n,t):t=localStorage.getItem(n);return t}function o(){return{releasedInstantSetup:"true",instantSetup:e.get("instant-setup"),pg:window.location.pathname.replace(/\//g,"_"),product:"jira",SEN:e.get("SEN"),setupSessionId:a(),sid:e.get("server-id"),v:e.get("version-number")}}return{insert:function(){return s(u(o()))},sendInstantSetupCompletedEvent:function(e){e=e||{};return s(u(n.extend(o(),e,{instantSetupCompleted:"true"})))},sendMailConfigurationEvent:function(e){e=e||{};return s(u(n.extend(o(),e)))},sendUserCreatedEvent:function(){return s(u(n.extend(o(),{instantSetupAIDUserCreated:"true"})))},sendUserLoggedInEvent:function(){return s(u(n.extend(o(),{instantSetupAIDUserLogged:"true"})))},sendUserArrivedFromMacSuccess:function(){return s(u(n.extend(o(),{instantSetupMacJourneyComplete:"true"})))},sendUserArrivedFromMacFailed:function(){return s(u(n.extend(o(),{instantSetupMacJourneyFailure:"true"})))},sendUserClickedOnMigrationsLink:function(){return s(u(n.extend(o(),{migrationsLinkClicked:"true"})))},sendUserClickedOnConnectingJiraToDatabaseLink:function(){return s(u(n.extend(o(),{connectingJiraToDatabaseLinkClicked:"true"})))},sendUserPickedDatabase:function(e){e=e||"";return s(u(n.extend(o(),{databaseOptionPicked:e})))}}}));