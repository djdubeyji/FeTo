!function(e,t,a){Calendar.setup=function(n){n=n||{};function r(e,t){void 0===n[e]&&(n[e]=t)}r("inputField",null);r("context",null);r("displayArea",null);r("button",null);r("eventName","click");r("ifFormat","%Y/%m/%d");r("daFormat","%Y/%m/%d");r("disableFunc",null);r("dateStatusFunc",n.disableFunc);r("dateText",null);r("firstDay",null);r("align","Br");r("range",[1900,2999]);r("weekNumbers",!0);r("useISO8601WeekNumbers",!1);r("flat",null);r("flatCallback",null);r("onSelect",null);r("onClose",null);r("onUpdate",null);r("date",null);r("todayDate",null);r("showsTime",!1);r("timeFormat","24");r("step",1);r("position",null);r("cache",!1);r("showOthers",!1);r("multiple",null);Calendar._TT||(Calendar._TT={});Calendar._TT.SEL_DATE=a.I18n.getText("date.picker.select.date");Calendar._TT.SEL_DATE_TIME=a.I18n.getText("date.picker.select.date.n.time");Calendar._TT.WEEK=a.I18n.getText("date.picker.week.label");Calendar._TT.WEEK_FN=function(e){return a.I18n.getText("date.picker.week.number.label",e)};Calendar._TT.PREV_YEAR=a.I18n.getText("date.picker.go.to.previous.year");Calendar._TT.PREV_MONTH=a.I18n.getText("date.picker.go.to.previous.month");Calendar._TT.NEXT_MONTH=a.I18n.getText("date.picker.go.to.next.month");Calendar._TT.NEXT_YEAR=a.I18n.getText("date.picker.go.to.next.year");Calendar._TT.HOURS_FN=function(e){return a.I18n.getText("date.picker.time.hours.label",Number.parseInt(e))};Calendar._TT.MINUTES_FN=function(e){return a.I18n.getText("date.picker.time.minutes.label",Number.parseInt(e))};Calendar._TT.TIME_INSTRUCTIONS=a.I18n.getText("date.picker.time.button.instructions");Calendar._TT.TIME_AM_PM_INSTRUCTIONS=a.I18n.getText("date.picker.time.ampm.button.instructions");Calendar._TT.CONFIRM=a.I18n.getText("date.picker.confirm.selection");Calendar._TT.CANCEL=a.I18n.getText("common.words.cancel");var l,i,o=["context","inputField","button","displayArea"];for(l in o)n[i=o[l]]instanceof e&&(n[i]=n[i][0]);var u=["inputField","displayArea","button"];for(l in u)if("string"==typeof n[i=u[l]]){var d="#"+e.escapeSelector(n[i]),s=e(n.context||document.body).find(d);n[i]=s[0]}if(!(n.flat||n.multiple||n.inputField||n.displayArea||n.button)){t.log("Calendar.setup:\n  Nothing to setup (no fields found).  Please check your code");return!1}n.firstDay&&null!==n.firstDay&&(n.firstDay=+n.firstDay);function p(t){var a=t.params;if(a.inputField){a.inputField.value=t.date.print(a.ifFormat);e(a.inputField).change()}a.displayArea&&(a.displayArea.innerHTML=t.date.print(a.daFormat));"function"==typeof a.onUpdate&&a.onUpdate(t);a.flat&&"function"==typeof a.flatCallback&&a.flatCallback(t);(t.dateClicked||a.singleClick)&&t.callCloseHandler()}if(null!=n.flat){"string"==typeof n.flat&&(n.flat=document.getElementById(n.flat));if(!n.flat){t.log("Calendar.setup:\n  Flat specified but can't find parent.");return!1}var c=new Calendar(n.firstDay,n.date,n.todayDate,n.onSelect||p);c.showsOtherMonths=n.showOthers;c.showsTime=n.showsTime;c.time24="24"==n.timeFormat;c.params=n;c.weekNumbers=n.weekNumbers;c.setRange(n.range[0],n.range[1]);c.setDateStatusHandler(n.dateStatusFunc);c.getDateText=n.dateText;n.ifFormat&&c.setDateFormat(n.ifFormat);n.inputField&&"string"==typeof n.inputField.value&&c.parseDate(n.inputField.value);c.create(n.flat);c.show();return!1}var T=n.button||n.displayArea||n.inputField;e(T).bind(n.eventName,(function(e){e.preventDefault();m()}));n.inputField&&function(){var t=e(n.inputField);n.button&&e(n.button).mousedown((function(e){e.preventDefault()}));t.keydown((function(e){var a=window.calendar;"ArrowDown"!==e.key||a&&!a.hidden||setTimeout((function(){m(t)}),1)}))}();function m(e){if(!0!==Calendar._UNSUPPORTED){var t=n.inputField||n.displayArea,a=n.inputField?n.ifFormat:n.daFormat,r=!1,l=window.calendar;l&&l.hide();t&&(t.value||t.innerHTML)&&(n.date=Date.parseDate(t.value||t.innerHTML,a));if(l&&n.cache){n.date&&l.setDate(n.date);l.hide()}else{window.calendar=l=new Calendar(n.firstDay,n.date,n.todayDate,n.onSelect||p,n.onClose||function(e){e.hide()});l.showsTime=n.showsTime;l.time24="24"==n.timeFormat;l.weekNumbers=n.weekNumbers;Date.useISO8601WeekNumbers=n.useISO8601WeekNumbers;n.useISO8601WeekNumbers&&(l.firstDayOfWeek=1);r=!0}if(n.multiple){l.multiple={};for(var i=n.multiple.length;--i>=0;){var o=n.multiple[i],u=o.print("%Y%m%d");l.multiple[u]=o}}l.showsOtherMonths=n.showOthers;l.yearStep=n.step;l.setRange(n.range[0],n.range[1]);l.params=n;l.setDateStatusHandler(n.dateStatusFunc);l.getDateText=n.dateText;l.setDateFormat(a);r&&l.create();l.refresh();l.triggerEl=e||null;n.position?l.showAt(n.position[0],n.position[1]):l.showAtElement(n.button||n.displayArea||n.inputField,n.align);return!1}alert("The JIRA Calendar does not currently support your language.")}return c}}(require("jquery"),require("jira/util/logger"),require("jira/util/formatter"));