!function(){"use strict";var e=require("jquery"),r=require("jira/data/parse-options-from-fieldset"),i=require("jira/util/events"),t=require("jira/util/events/reasons"),s=require("jira/util/events/types"),a=require("jira/autocomplete/issue-autocomplete"),l=require("jira/autocomplete/user-autocomplete"),o=require("wrm/context-path")();i.bind(s.NEW_CONTENT_ADDED,(function(e,r,i){if(i!==t.panelRefreshed){l.init(r);a.init(r)}}));i.bind(s.NEW_CONTENT_ADDED,(function(i,s,a){a!==t.panelRefreshed&&e("fieldset.user-searcher-params",s).each((function(){var i=r(e(this)),t=e("#"+i.fieldId+"_container",s);if(!0===i.userPickerEnabled)var a=l({fieldID:i.fieldId,delimChar:!0===i.multiSelect?",":void 0,ajaxData:{fieldName:i.fieldName}});var u=function(r){var t=e("#"+i.fieldId,s),l=e("#"+i.fieldId+"Image",s),o=e("#"+i.fieldId+"GroupImage",s),u=e("#"+i.fieldId+"_desc",s);if("select.list.none"===r){t.val("").attr("disabled","true");l.hide();o.hide();u.hide()}else{t.removeAttr("disabled");if("select.list.group"===r){l.hide();o.show();if(!0===i.userPickerEnabled){a.disable();u.hide()}}else{l.show();o.hide();if(!0===i.userPickerEnabled){a.enable();u.show()}}}};e("#"+i.userSelect,s).change((function(){var r=e(this).find("option:selected").attr("rel");u(r)})).find("option:selected").each((function(){u(e(this).attr("rel"))}));t.find("a.user-popup-trigger").click((function(e){var r=o+"/secure/popups/UserPickerBrowser.jspa?";r+="formName="+i.formName+"&";r+="multiSelect="+i.multiSelect+"&";r+="decorator=popup&";r+="element="+i.fieldId;var t=window.open(r,"UserPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self;t.focus();e.preventDefault()}));t.find("a.group-popup-trigger").click((function(e){var r=o+"/secure/popups/GroupPickerBrowser.jspa?";r+="formName="+i.formName+"&";r+="multiSelect="+i.multiSelect+"&";r+="decorator=popup&";r+="element="+i.fieldId;var t=window.open(r,"GroupPicker","status=yes,resizable=yes,top=100,left=100,width=800,height=750,scrollbars=yes");t.opener=self;t.focus();e.preventDefault()}))}))}))}();