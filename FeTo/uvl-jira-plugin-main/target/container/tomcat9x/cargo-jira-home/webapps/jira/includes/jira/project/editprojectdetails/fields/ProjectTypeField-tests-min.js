AJS.test.require(["jira.webresources:edit-project-details"],(function(){"use strict";var e=require("jquery"),t=require("underscore"),i=require("jira/project/edit/project-type-field"),o=["business","software","service_desk"];module("JIRA.Project.ProjectTypeField",{setup:function(){this.$field=e(function(){var e='<div><select class="project-type-select select" name="projectTypeKey" id="projectTypeKey">';t.each(o,(function(t){e+='<option value="'+t+'">'+t+"</option>"}));return e+="</select></div>"}());e("#qunit-fixture").append(this.$field);new i({el:this.$field});this.changeProjectType=function(t){this.$field.find(".drop-menu").click();e("#projectTypeKey-suggestions").find("li.aui-list-item-li-"+t).click()}},teardown:function(){e("#aui-flag-container").remove();e("#projectTypeKey-suggestions").parent().remove()}});test("Converts the project type select to a SingleSelect",(function(){ok(this.$field.find("#projectTypeKey-field"),"Should have created it's own single select field");ok(this.$field.find("#projectTypeKey").hasClass("aui-ss-select"),"Should have modified the original select box")}));test("Changing to a different project type opens a flag, checking warnable working for it",(function(){this.changeProjectType(o[1]);ok((t=e("#aui-flag-container").find(".aui-flag")).length>0&&!t.attr("hidden"),"Should have a flag with the message");var t}))}));