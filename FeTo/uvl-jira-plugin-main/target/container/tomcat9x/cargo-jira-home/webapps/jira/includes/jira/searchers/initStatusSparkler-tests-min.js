AJS.test.require(["jira.webresources:searchers"],(function(){"use strict";var e=this,t={getSelectedProjectsIds:function(){return["11","13"]},getSelectedIssueTypeIds:function(){return["123","4321"]}};module("statusSparkler",{setup:function(){e.sandbox=sinon.sandbox.create();e.context=AJS.test.mockableModuleContext();e.skateSpy=e.sandbox.spy();e.skateSpy.type={};e.mockedStatusPickerFinalOptions={ajaxOptions:42};e.statusPickerOptionsSpy=e.sandbox.spy((function(){return e.mockedStatusPickerFinalOptions}));e.checkboxMultiSelectStatusSpy=e.sandbox.spy();e.context.mock("jira/skate",e.skateSpy);e.context.mock("jira/searchers/element/status-picker-options",e.statusPickerOptionsSpy);e.context.mock("jira/ajs/select/checkbox-multi-select-status-lozenge",e.checkboxMultiSelectStatusSpy);e.context.mock("jira/searchers/element/common-pickers-utils",t);e.context.require("jira/searchers/element/status-lozenge-sparkler");e.fixture=document.getElementById("qunit-fixture");e.fixture.innerHTML='<select class="select js-default-checkboxmultiselectstatuslozenge" id="searcher-status" multiple="multiple" name="status">\n                <option title="Done" value="1">\n                    Done\n                </option>\n                <option title="In Progress" value="2">\n                    In progress\n                </option>\n            </select>'},teardown:function(){e.sandbox.restore()}});test("should setup status picker",(function(){equal(e.skateSpy.calledOnce,!0,"skate was called");var s=e.skateSpy.args[0];equal(s[0],"js-default-checkboxmultiselectstatuslozenge","Class name defining picker is correct");var c=document.getElementById("searcher-status");s[1].created(c);equal(e.statusPickerOptionsSpy.calledOnce,!0,"statusPickerOptions() was called");var a=e.statusPickerOptionsSpy.firstCall.args[0];equal(a.content,"mixed","Mixed descriptor fetcher is set");var n={projectIds:t.getSelectedProjectsIds(),issueTypeIds:t.getSelectedIssueTypeIds()};deepEqual(a.baseAjaxOptions,n,"Base Ajax options are correctly set");equal(e.checkboxMultiSelectStatusSpy.calledOnce,!0,"New CheckboxMultiSelectStatusLozenge was created");equal(e.checkboxMultiSelectStatusSpy.calledWith(e.mockedStatusPickerFinalOptions),!0,"CheckboxMultiSelectStatusLozenge is passed final project picker options")}))}));