AJS.test.require(["jira.webresources:searchers"],(function(){"use strict";var e=this,t={getSelectedProjectsIds:function(){return["1423"]},getSelectedIssueTypeIds:function(){return["123","444"]}};module("multiSelectCustomFieldSparkler",{setup:function(){e.sandbox=sinon.sandbox.create();e.context=AJS.test.mockableModuleContext();e.skateSpy=e.sandbox.spy();e.skateSpy.type={};e.mockedMultiSelectPickerFinalOptions={ajaxOptions:47};e.multiSelectPickerOptionsSpy=e.sandbox.spy((function(){return e.mockedMultiSelectPickerFinalOptions}));e.checkboxMultiSelectSpy=e.sandbox.spy();e.context.mock("jira/skate",e.skateSpy);e.context.mock("jira/searchers/element/multi-select-custom-field-picker-options",e.multiSelectPickerOptionsSpy);e.context.mock("jira/ajs/select/checkbox-multi-select",e.checkboxMultiSelectSpy);e.context.mock("jira/searchers/element/common-pickers-utils",t);e.context.require("jira/searchers/element/multi-select-custom-field-sparkler");e.fixture=document.getElementById("qunit-fixture");e.fixture.innerHTML='\n                <select class="select js-default-checkboxmultiselect-custom-field" \n                    id="searcher-customfield_10201" \n                    multiple="multiple" \n                    name="customfield_10201" \n                    data-custom-field-id="10201"\n                    data-max-inline-results-displayed="100"\n                >\n                    <option title="Option 0" value="10116">\n                        Option 0\n                    </option>\n                    <option title="Option 1" value="10118">\n                        Option 1\n                    </option>\n                </select>'},teardown:function(){e.sandbox.restore()}});test("should setup multiselect custom field picker",(function(){equal(e.skateSpy.calledOnce,!0,"skate was called");var c=e.skateSpy.args[0];equal(c[0],"js-default-checkboxmultiselect-custom-field","Class name defining picker is correct");var s=document.getElementById("searcher-customfield_10201");c[1].created(s);equal(e.multiSelectPickerOptionsSpy.calledOnce,!0,"multiSelectCustomFieldPickerOptions was called");var l=e.multiSelectPickerOptionsSpy.firstCall.args[0];equal(l.content,"mixed","Mixed descriptor fetcher is set");var i={customFieldId:10201,projectIds:t.getSelectedProjectsIds(),issueTypeIds:t.getSelectedIssueTypeIds()};deepEqual(l.baseAjaxOptions,i,"Base Ajax options are correctly set");equal(e.checkboxMultiSelectSpy.calledOnce,!0,"New CheckboxMultiSelect was created");equal(e.checkboxMultiSelectSpy.calledWith(e.mockedMultiSelectPickerFinalOptions),!0,"CheckboxMultiSelect is passed final multi select picker options")}))}));