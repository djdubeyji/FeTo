define("jira/message/templates",["underscore"],(function(e){"use strict";var t=JIRA.Templates.Messages;return e.extend({WARNING:t.warningMsg,ERROR:t.errorMsg,SUCCESS:t.successMsg,INFO:t.infoMsg},t)}));define("jira/message",["jira/flag","jquery","jira/message/templates","jira/data/local-storage"],(function(e,t,s,r){"use strict";var o=10;function n(e,s){var r,n=(s=s||{}).type({msg:e,closeable:s.closeable}),a=t("<div>").html(n),i=null!=s.timeout?s.timeout:o;s.closeable&&a.find(".aui-close-button").click((function(e){e.preventDefault();null!=r&&window.clearTimeout(r);a.remove()}));i>0&&(r=window.setTimeout((function(){a.fadeOut((function(){a.remove()}))}),1e3*i));return a}function a(e,t){return n(e,t=t||{}).prependTo(t.target)}var i=function(){var e="jira.messages.reloadMessageMsg",o="jira.messages.reloadMessageType",n="jira.messages.reloadMessageCloseable",i="jira.messages.reloadMessageTarget";t((function(){var g,c,l,f=r.getItem(e);if(f){g=r.getItem(o);c="true"===r.getItem(n)||!0===r.getItem(n);l=r.getItem(i);r.removeItem(e);r.removeItem(o);r.removeItem(n);r.removeItem(i);var m={WARNING:{soyTemplate:s.warningMsg,auiType:"warning"},ERROR:{soyTemplate:s.errorMsg,auiType:"error"},SUCCESS:{soyTemplate:s.successMsg,auiType:"success"},INFO:{soyTemplate:s.infoMsg,auiType:"info"}};!l||t(l).is(document.body)?u(f,{type:m[g].auiType,closeable:c}):a(f,{type:m[g].soyTemplate,closeable:c,target:t(l)})}}));return function(t,s){try{r.setItem(e,t);r.setItem(o,s.type)}catch(e){}if(s.closeable)try{r.setItem(n,s.closeable)}catch(e){}if(s.target)try{r.setItem(i,s.target)}catch(e){}}}();function u(s,r){var o={};r=r||{};o.type=r.type;void 0===r.timeout?!1===r.closeable&&(o.close="auto"):r.timeout>0?o.close="auto":!1===r.closeable?o.close="never":o.close="manual";var n=t(e.showMsg("",s,o));r.id&&n.attr("id",r.id);return n}function g(e,s){var r=t(e);s=s||{};r.css("backgroundColor","#fff").animate({backgroundColor:s.backgroundColor||"#ffd"});window.setTimeout((function(){r.animate({backgroundColor:"#fff"},"slow",(function(){r.css("backgroundColor","")}))}),3e3)}var c=function(){var e="jira.messages.fadeInBackground.color",s="jira.messages.fadeInBackground.target";t((function(){var t=r.getItem(e),o=r.getItem(s);r.removeItem(e);r.removeItem(s);g(o,{backgroundColor:t})}));return function(t,o){o=o||{};var n=r.getItem(s);if(n){(n=n.split(",")).push(t);n=n.join(",")}else n=t;try{r.setItem(s,n);r.setItem(e,o.backgroundColor||"#ffd")}catch(e){}}}(),l={Types:s,DefaultTimeout:10,buildMsg:n,showMsg:u,showMessageAtTarget:a,showMsgOnReload:i,fadeInBackground:g,fadeInBackgroundOnReload:c,showErrorMsg:function(e,s){return u(e,t.extend({},s,{type:"error"}))},showWarningMsg:function(e,s){return u(e,t.extend({},s,{type:"warning"}))},showSuccessMsg:function(e,s){return u(e,t.extend({},s,{type:"success"}))},showInfoMsg:function(e,s){return u(e,t.extend({},s,{type:"info"}))},showReloadErrorMsg:function(e,t){(t=t||{}).type="ERROR";return i(e,t)},showReloadWarningMsg:function(e,t){(t=t||{}).type="WARNING";return i(e,t)},showReloadSuccessMsg:function(e,t){(t=t||{}).type="SUCCESS";return i(e,t)},showReloadInfoMsg:function(e,t){(t=t||{}).type="INFO";return i(e,t)}},f={removeInVersion:"8.0",alternativeName:"jira/flag",sinceVersion:"6.4"};AJS.deprecate.prop(l,"showMsg",f);AJS.deprecate.prop(l,"showErrorMsg",f);AJS.deprecate.prop(l,"showWarningMsg",f);AJS.deprecate.prop(l,"showSuccessMsg",f);return l}));AJS.namespace("JIRA.Messages",null,require("jira/message"));!function(){"use strict";var e=require("jira/message/templates"),t=require("jira/message"),s=require("jquery");s.fn.fadeInBackground=function(e){t.fadeInBackground(this,e);return this};s.fn.showErrorMsg=function(s,r){(r=r||{}).target=this;r.type=e.errorMsg;return t.showMessageAtTarget(s,r)};s.fn.showWarningMsg=function(s,r){(r=r||{}).target=this;r.type=e.warningMsg;return t.showMessageAtTarget(s,r)};s.fn.showSuccessMsg=function(s,r){(r=r||{}).target=this;r.type=e.successMsg;return t.showMessageAtTarget(s,r)};s.fn.showInfoMsg=function(s,r){(r=r||{}).target=this;r.type=e.infoMsg;return t.showMessageAtTarget(s,r)}}();