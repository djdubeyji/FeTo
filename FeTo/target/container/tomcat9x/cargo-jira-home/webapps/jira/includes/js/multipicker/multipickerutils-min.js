define("jira/multipicker/multipickerutils",[],(function(){"use strict";function e(e){var r=document.getElementById("openElement").textContent.trim(),o=opener.document.getElementById(r),c=l(AJS.$('input[name="previouslySelected"]').val(),e),u=(c=c.substring(1,c.length-1)).split(";");for(var i in u)u.hasOwnProperty(i)&&t(u[i].replace(/%59/,";"),o);var a=[];AJS.$.each(o.value.split(","),(function(){var e=n(this);e&&""!==e&&a.push(e)}));a.sort();o.value=a.join(", ");window.close()}function t(e,t){for(var r=t.value.split(","),o=0;o<r.length;o++)if(e===n(r[o]))return;""===t.value?t.value=e:t.value=t.value+", "+e}function n(e){return e.replace(/^\s*|\s*$/g,"")}var r;function o(e,t){t.checked?e.shiftKey?function(e){if(null==r)return;var t=c(e),n=function(e,t,n,r){var o;for(o=t;o<=n;o++)e.form.elements[e.name][o].checked=r;return o}(e,Math.min(t,r),Math.max(t,r),!0);r=n}(t):r=c(t):r=null}function c(e){for(var t=0;t<e.form.elements[e.name].length;t++)if(e.form.elements[e.name][t].value===e.value)return t}function l(e,t){var n=e,r="input:checkbox[name=userchecks]";t&&""!==t&&(r=t);AJS.$(document.selectorform).find(r).each((function(){var e,t=this;if(null!=t){var r=function(e){return e.replace(/;/,"%59")}(t.value);n=(e=r,n.replace(";"+e+";",";"));if(t.checked){0===n.length&&(n+=";");n+=r;n+=";"}}}));return n}return{rowHover:function(e){e.oldClassName=e.className;e.className="rowHover";e.onmouseout=function(){this.className=this.oldClassName}},setCheckboxes:function(){for(var e=document.selectorform.all.checked,t=document.selectorform.elements.length,n=0;n<t;n++)document.selectorform.elements[n].checked=e},selectSingleGroup:function(e){e.preventDefault();var t=document.querySelector("input[name=userchecks]:checked");if(!t)return window.close();var n=document.getElementById("openElement").textContent.trim();opener.document.getElementById(n).value=t.value;window.close()},selectSingleUser:function(e){e.preventDefault();var t=document.querySelector("input[name=userchecks]:checked");if(!t)return window.close();var n=document.getElementById("triggerEvent").textContent.trim(),r=document.getElementById("openElement").textContent.trim(),o=opener.jQuery("#"+r);o.val(t.value);n&&o.trigger(n,t.value);window.close()},processCBClick:o,setRadio:function(e){var t=document.getElementById(e);t&&(t.checked=!0)},selectMultiUser:function(t){t.preventDefault();var n=document.querySelectorAll("input[name=userchecks]:checked"),r=[];n.forEach((function(e){r.push({id:e.value,displayName:e.getAttribute("data-display-name")})}));if(0===r.length)return window.close();var o=document.getElementById("triggerEvent").textContent.trim();if(o){var c=document.getElementById("openElement").textContent.trim();opener.jQuery("#"+c).trigger(o,JSON.stringify(r));window.close()}else e("input[data-user-select]")},toggleCheckBox:function(e,t){e.preventDefault();var n=document.getElementById(t);null==n&&(n=document.all[t]);n.checked=!n.checked;o(e,n);return!1},addItemsToInputField:e}}));