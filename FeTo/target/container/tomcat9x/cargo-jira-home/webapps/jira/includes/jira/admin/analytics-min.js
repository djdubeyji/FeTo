var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};define("jira/admin/analytics",["jira/project/projectdata","jira/util/events","jira/admin/admindata","jira/common/page","wrm/context-path","jira/util/data/meta","jquery","jira/analytics","jira/libs/parse-uri"],(function(t,e,o,n,i,c,r,a,f){"use strict";var l=r(document),d="atl.jira.proj.config"===c.get("admin.active.section");function s(t,e,o){o="object"!==(void 0===o?"undefined":_typeof(o))?{}:o;return{name:"administration."+t+"."+(e=e||"unknown"),properties:r.extend({type:e,tab:c.get("admin.active.tab"),section:c.get("admin.active.section")},o)}}function w(t,e){a.send(s("projectconfig.workflowscheme",t,e))}function u(t,e){a.send(s("workflowscheme",t,e))}function p(){return!!r(".status-draft").length}function k(t,e){return s("workflow",t,e)}function m(t,e){a.send(s("navigate",t,e))}function g(t,e){a.send(s("projectconfig.workflow",t,e))}function j(t,e){l.on("click",t,(function(){var t=r(this).data("mode");a.send(k("selectmode",{mode:t,edit:e}))}))}function h(t,e,o){a.send(k("edit",{mode:t,action:e,object:o}))}function v(t,e,o){l.on("click",t,(function(){h("text",e,o)}))}function y(t,e){"true"!==r(e.currentTarget).attr("aria-pressed")&&a.send({name:"projectconfig.toggle."+t})}function b(t){if("string"!=typeof t)return null;var e,o=f(t),n=c.get("projectKey");e=(e=o.path.slice(i().length)).replace(/project-config\/(.*?)(\/|$)/,"project-config/PROJECTKEY$2");n&&n.length&&(e=e.split(n).join("PROJECTKEY"));return e}return{bindEvents:function(){e.bind("addworkflow",(function(){p()&&u("addworkflowtodraft")}));e.bind("assignissuetypes",(function(){p()&&u("assignissuetypestodraft")}));l.on("click",".remove-all-issue-types",(function(){p()&&u("deleteworkflowfromdraft")}));l.on("click","#discard-draft-dialog input[type=submit]",(function(){d?w("discarddraft"):u("discarddraft")}));l.on("click","#view-original",(function(){u("vieworiginalofdraft")}));l.on("click","#view-draft",(function(){u("viewdraft")}));l.on("click","#publish-draft",(function(){u("publishclicked")}));d||"draftMigrationSuccess"!==f(location).anchor||u("migrationcompleted");e.bind("draftcreated",(function(){d?w("draftcreated"):u("draftcreated")}));l.on("click","#workflowscheme-editor .workflow-text-view",(function(){u("viewworkflow",{mode:"text"})}));l.on("click","#workflowscheme-editor .workflow-diagram-view",(function(){u("viewworkflow",{mode:"diagram"})}));l.on("click","#project-config-panel-screens a.project-config-screen",(function(){var t=r(this).data("operationId");1===t?a.send({name:"administration.screenschemes.editlink.clicked.operation.edit"}):2===t?a.send({name:"administration.screenschemes.editlink.clicked.operation.view"}):a.send({name:"administration.screenschemes.editlink.clicked.operation.create"})}));l.on("click",".project-config-more-link",(function(){var t=r(this);m("morelink",{href:b(t.attr("href")),title:t.attr("title")})}));n.relatedContentElement().on("click","a",(function(){var e=r(this),n=e.attr("id");m("tabs",{id:n=/^view_project_issuetype_\d+$/.test(n)?"view_project_issuetype":n,href:b(e.attr("href")),title:e.text(),isAdmin:o.isUserAdmin(),isSysAdmin:o.isUserSysAdmin(),projectType:t.getProjectType()})}));l.on("click","#project-config-header-name",(function(){m("projectheader")}));l.on("click","#project-config-header-avatar",(function(){m("projectavatar")}));l.on("click",".back-to-proj-config",(function(){m("backtoproject",{href:b(r(this).attr("href"))})}));l.on("click",".project-config-summary-scheme a",(function(){m("selectedscheme",{href:b(r(this).attr("href"))})}));l.on("click",".project-config-workflow-text-link",(function(){g("viewastext")}));l.on("click",".project-config-screen",(function(){g("gotoscreen")}));l.on("click",".project-config-workflow-edit",(function(){r(this).closest(".project-config-workflow-default").length?g("copyworkflow"):g("editworkflow")}));l.on("click",".issuetypeconfig-edit-workflow",(function(){g("editworkflowissuetype")}));l.on("click","#toggleWorkflowTab",(function(t){y("workflow",t)}));l.on("click","#toggleViewTab",(function(t){y("view",t)}));l.on("click",".project-config-workflow-diagram-container",(function(){g("enlargeworkflow")}));l.on("click","#project-config-workflows-view-original",(function(){w("vieworiginalofdraft")}));l.on("click","#project-config-workflows-view-draft",(function(){w("viewdraft")}));l.on("click","#project-config-workflows-scheme-change",(function(){w("switchscheme")}));l.on("click","#project_import_link_lnk",(function(){m("topnav.jim")}));j(".workflow-view-toggle",!1);j(".workflow-edit-toggle",!0);v("#workflow-step-add-submit","add","step");v("#workflow-step-update","update","step");v("#workflow-step-delete","remove","step");v("#workflow-transition-add","add","transition");v("#workflow-transition-update","update","transition");v("#workflow-transition-delete","remove","transition");v("#workflow-global-transition-update","update","globaltransition");e.bind("wfd-edit-action",(function(t,e){h("diagram",e.action,e.object)}))},event:s,sendProjectWorkflowSchemeEvent:w,sendLoadWorkflowsTabEvent:function(){g("loadworkflowstab",{referrer:b(document.referrer)})}}}));AJS.namespace("JIRA.Analytics",null,require("jira/admin/analytics"));