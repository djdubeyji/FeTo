!function(){"use strict";require(["wrm/context-path"],(function(e){var n=function(){document.getElementById("jmx-app-warning-container").hidden=document.getElementById("enable-jmx-toggle").checked||!document.getElementById("enable-app-monitoring-toggle").checked;document.getElementById("jmx-ipd-warning-container").hidden=document.getElementById("enable-jmx-toggle").checked||!document.getElementById("enable-ipd-monitoring-toggle").checked},t=function(e,t,o,i,c){var d=i+"/startExposing",a=i+"/stopExposing",l=e.checked;fetch(l?d:a,{method:"POST"}).then((function(n){if(n.ok){if(!1===l){t.checked=!1;o.checked=!1}}else{e.checked=!l;console.error("Error while trying to toggle JMX monitoring",n)}})).catch((function(n){e.checked=!l;console.error("Error while trying to toggle jmx monitoring",n)})).finally((function(){e.busy=!1;c.isVisible()&&c.hide();n()}))},o=function(e,n,o,i){var c=AJS.dialog2("#disable-jmx-dialog"),d=document.getElementById("jmx-disable-dialog-disable-button"),a=document.getElementById("jmx-disable-dialog-cancel-button");!function(e,n,t,o){e.on("hide",(function(){if(!0===n.busy){n.busy=!1;n.checked=!n.checked}}));e.on("show",(function(){var e=document.getElementById("disable-jmx-warning-app"),n=document.getElementById("disable-jmx-warning-ipd");e.hidden=!t.checked;n.hidden=!o.checked}))}(c,e,n,o);!function(e,n,o,i,c,d){e.addEventListener("click",(function(){t(n,o,i,c,d)}))}(d,e,n,o,i,c);!function(e,n){e.addEventListener("click",(function(){n.hide()}))}(a,c);e.addEventListener("change",(function(){e.busy=!0;!1===e.checked&&(n.checked||o.checked)?c.show():t(e,n,o,i,c)}))},i=function(e,t,o,i){var c=e.checked;fetch(o,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({enabled:c})}).then((function(n){if(n.ok)!0===c&&(t.checked=!0);else{e.checked=!c;console.error("Error while trying to toggle JMX monitoring",n)}})).catch((function(n){e.checked=!c;console.error("Error while trying to toggle jmx monitoring",n)})).finally((function(){e.busy=!1;i.isVisible()&&i.hide();n()}))},c=function(e,n,t,o){var c=AJS.dialog2("#enable-jmx-dialog-for-"+o),d=document.getElementById("jmx-enable-dialog-enable-button-for-"+o),a=document.getElementById("jmx-enable-dialog-cancel-button-for-"+o);!function(e,n){e.on("hide",(function(){if(!0===n.busy){n.busy=!1;n.checked=!n.checked}}))}(c,e);!function(e,n,t,o,c){e.addEventListener("click",(function(){i(n,t,o,c)}))}(d,e,n,t,c);!function(e,n){e.addEventListener("click",(function(){n.hide()}))}(a,c);e.addEventListener("change",(function(){var o=e.checked,d=n.checked;e.busy=!0;!0===o&&!1===d?c.show():i(e,n,t,c)}))},d=function(){var n=e()+"/rest/api/2/monitoring/jmx",t=e()+"/rest/api/2/monitoring/app",i=e()+"/rest/api/2/monitoring/ipd",d=document.getElementById("enable-jmx-toggle"),a=document.getElementById("enable-app-monitoring-toggle"),l=document.getElementById("enable-ipd-monitoring-toggle");o(d,a,l,n);c(a,d,t,"app");c(l,d,i,"ipd")};"complete"===document.readyState||"interactive"===document.readyState?d():document.addEventListener("DOMContentLoaded",d)}))}();