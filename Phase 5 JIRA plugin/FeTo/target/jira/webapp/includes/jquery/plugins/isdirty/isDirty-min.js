define("jira/jquery/plugins/isdirty",["jira/util/logger","jira/util/formatter","jira/util/events","jira/util/browser","jquery"],(function(e,r,n,t,i){var a="ajs-dirty-warning-exempt",o="ajs-dirty-warning-whitelist",s="ajs-dirty-warning-by-default",u="ajs-dirty-warning-subsequent-submits-allowed",l=!1,f=r.I18n.getText("common.forms.dirty.message"),d=f;i.fn.isDirty=function(){for(var e=this.find("*").andSelf().filter(":input"),r=0;r<e.length;r++)if(h(e[r]))return!0;return!1};i.fn.removeDirtyWarning=function(){i(this.form||this).closest("form").addClass(a);return this};n.bind("page-unload.location-change.from-dialog",(function(){window.onbeforeunload=function(){}}));n.bind("page-unload.refresh.from-dialog",(function(){d=r.I18n.getText("common.forms.dirty.message.from.dialog")}));function c(){var e=d;d=f;return"***\n\n"+e+"\n\n***"}var g={getInputsToCheck:function(){return i("input[type='text'], textarea[name], ."+o)},getDirtyWarning:function(){for(var e=g.getInputsToCheck(),r=0,n=e.size();r<n;r++)if(!l&&h(e[r]))return c();l&&(l=!1)},ClassNames:{SANCTIONED:o,EXEMPT:a,BY_DEFAULT:s,SUBSEQUENT_SUBMITS_ALLOWED:u}};t.isSelenium()||(window.onbeforeunload=g.getDirtyWarning);function h(e){var r=i(e),n=i(e.form),t=e.type;if(n.hasClass(a)||r.hasClass(a))return!1;if(n.hasClass(s))return!0;if(r.is(":hidden")&&!r.hasClass(o))return!1;if(!r.parent().length)return!1;if(n.has(".error, .errMsg, .errorMessage, .errLabel, .ajaxerror").length>0||n.prev(".error").length>0||n.children(".error").length>0)return!0;if(("hidden"===t||"submit"===t||"button"===t)&&!r.hasClass(o))return!1;if("select-one"===t||"select-multiple"===t){for(var u=e.options,l=0;l<u.length;l++){var f=u[l];if(f.selected!==f.defaultSelected)return!0}return!1}return"checkbox"===t||"radio"===t?e.checked!==e.defaultChecked:e.value!==e.defaultValue}i(document).delegate("form","submit",(function(){var e=i(this);(function(e){return e.parents(".jira-dialog.jira-dialog-open, .jira-dialog2.jira-dialog-open").length<=0})(e)&&!function(e){return e.hasClass(u)}(e)&&(l=!0)}));i((function(){i(".cancel").bind("click",m)}));i((function(){i("#cancelButton").bind("mousedown keydown click",m)}));function m(){e.log("the cancel event on forms is deprecated");i(this.form||this).closest("form").trigger("cancel")}return g}));AJS.namespace("JIRA.DirtyForm",null,require("jira/jquery/plugins/isdirty"));